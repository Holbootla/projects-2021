(()=>{"use strict";var e={373:(e,t,n)=>{n.r(t)},107:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWinner=t.deleteWinner=t.createWinner=t.getWinner=t.getWinners=t.driveEngine=t.stopEngine=t.startEngine=t.updateCar=t.deleteCar=t.createCar=t.getCar=t.getCars=void 0;const i="http://127.0.0.1:3000",s=`${i}/garage`,r=`${i}/engine`,a=`${i}/winners`;t.getCars=(e=1,t=7)=>n(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s}?_page=${e}&_limit=${t}`);return{cars:yield n.json(),carsCount:n.headers.get("X-Total-Count")}})),t.getCar=e=>n(void 0,void 0,void 0,(function*(){return(yield fetch(`${s}/${e}`)).json()})),t.createCar=e=>n(void 0,void 0,void 0,(function*(){(yield fetch(`${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()})),t.deleteCar=e=>n(void 0,void 0,void 0,(function*(){(yield fetch(`${s}/${e}`,{method:"DELETE"})).json()})),t.updateCar=(e,t)=>n(void 0,void 0,void 0,(function*(){(yield fetch(`${s}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()})),t.startEngine=e=>n(void 0,void 0,void 0,(function*(){return(yield fetch(`${r}?id=${e}&status=started`)).json()})),t.stopEngine=e=>n(void 0,void 0,void 0,(function*(){return(yield fetch(`${r}?id=${e}&status=stopped`)).json()})),t.driveEngine=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}?id=${e}&status=drive`).catch();return 200!==t.status?{success:!1}:t.json()})),t.getWinners=(e=1,t=10,i="time",s="ASC")=>n(void 0,void 0,void 0,(function*(){const n=yield fetch(`${a}?_page=${e}&_limit=${t}&_sort=${i}&_order=${s}`);return{winners:yield n.json(),winnersCount:n.headers.get("X-Total-Count")}})),t.getWinner=e=>n(void 0,void 0,void 0,(function*(){return(yield fetch(`${a}/${e}`)).json()})),t.createWinner=e=>n(void 0,void 0,void 0,(function*(){(yield fetch(`${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()})),t.deleteWinner=e=>n(void 0,void 0,void 0,(function*(){(yield fetch(`${a}/${e}`,{method:"DELETE"})).json()})),t.updateWinner=(e,t)=>n(void 0,void 0,void 0,(function*(){(yield fetch(`${a}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}))},962:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(871)),r=i(n(608));t.default=class{constructor(){this.body=document.querySelector("body"),this.header=(new s.default).render(),this.mainInstance=new r.default,this.main=this.mainInstance.render()}render(){var e,t;null===(e=this.body)||void 0===e||e.appendChild(this.header),null===(t=this.body)||void 0===t||t.appendChild(this.main)}addGarageVisibility(){this.mainInstance.addGarageVisibility()}addWinnersVisibility(){this.mainInstance.addWinnersVisibility()}}},871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.header=document.createElement("div"),this.header.classList.add("header"),this.nav=document.createElement("nav"),this.nav.classList.add("nav")}render(){return this.nav.innerHTML='\n    <a href="#garage" class="nav__item">Garage</a>\n    <a href="#winners" class="nav__item">Winners</a>\n    ',this.header.appendChild(this.nav),this.header}}},71:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),a=s(n(419)),d=s(n(499));t.default=class{constructor(e,t,n){this.wins=0,this.winners=new d.default,this.animationID=0,this.TRACK_SIZE=100,this.MILLISECONDS=1e3,this.TIME_TO_SHOW_WIN_MESSAGE=5e3,this.carId=n,this.store=a.default.getInstance(),this.name=e,this.color=t,this.carContainer=document.createElement("div"),this.carContainer.classList.add("car-container"),this.carHeader=document.createElement("div"),this.carHeader.classList.add("car-header"),this.btnSelect=document.createElement("div"),this.btnSelect.classList.add("btn"),this.btnSelect.classList.add("btn-select"),this.btnSelect.innerText="Select",this.btnRemove=document.createElement("div"),this.btnRemove.classList.add("btn"),this.btnRemove.classList.add("btn-remove"),this.btnRemove.innerText="Remove",this.carTitle=document.createElement("h4"),this.carTitle.classList.add("car-title"),this.carTitle.innerText=this.name,this.carMain=document.createElement("div"),this.carMain.classList.add("car-main"),this.driveBtns=document.createElement("div"),this.driveBtns.classList.add("drive-btns"),this.btnStart=document.createElement("div"),this.btnStart.classList.add("btn"),this.btnStart.classList.add("btn-start"),this.btnStart.innerText="Start",this.btnStop=document.createElement("div"),this.btnStop.classList.add("btn"),this.btnStop.classList.add("btn-stop"),this.btnStop.classList.add("btn_disabled"),this.btnStop.innerText="Stop",this.carTrack=document.createElement("div"),this.carTrack.classList.add("track"),this.car=document.createElement("div"),this.car.classList.add("car"),this.car.innerHTML=`\n    <svg height="100px" viewBox="-5 5 520 220" width="200px" xmlns="http://www.w3.org/2000/svg">\n            <g style="fill:${this.color}; stroke:black; stroke-width:5px">\n            <path d="m498.542969 80.964844c-28.695313-20.128906-69.269531-24.351563-98.253907-24.351563h-6.351562l-101.007812-47.136719c-12.582032-5.875-26.574219-8.976562-40.457032-8.976562h-89.164062c-8.664063 0-17.09375 1.730469-25.058594 5.140625l-92.566406 39.671875c-5.082032 2.179688-10.460938 3.285156-15.992188 3.285156h-6.160156c-12.972656-.003906-23.53125 10.554688-23.53125 23.53125v50.914063c0 11.238281 8.007812 20.953125 19.039062 23.097656l29.679688 5.773437c3.667969 22.617188 23.324219 39.941407 46.957031 39.941407 17.679688 0 33.125-9.699219 41.328125-24.050781h254.023438c8.203125 14.351562 23.648437 24.050781 41.328125 24.050781 17.675781 0 33.125-9.699219 41.328125-24.050781h14.785156c12.972656 0 23.53125-10.554688 23.53125-23.53125v-37.441407c0-10.285156-5.03125-19.957031-13.457031-25.867187zm-211.957031-57.894532 71.882812 33.542969h-107.035156l-35.242188-41.113281h36.277344c11.710938 0 23.507812 2.617188 34.117188 7.570312zm-90.148438-7.570312 35.242188 41.113281h-12.714844c-4.835938 0-9.417969-2.105469-12.566406-5.78125l-30.285157-35.332031zm-53.960938 137.304688c.503907-2.769532.78125-5.617188.78125-8.53125 0-3.195313-.320312-6.394532-.953124-9.507813-.824219-4.058594-4.78125-6.679687-8.839844-5.859375-4.0625.824219-6.683594 4.785156-5.859375 8.84375.433593 2.128906.652343 4.324219.652343 6.523438 0 17.964843-14.617187 32.578124-32.582031 32.578124-17.964843 0-32.578125-14.613281-32.578125-32.578124 0-17.964844 14.613282-32.582032 32.578125-32.582032 4.550781 0 8.945313.917969 13.070313 2.726563 3.789062 1.660156 8.214844-.066407 9.878906-3.859375 1.664062-3.792969-.0625-8.214844-3.855469-9.878906-6.035156-2.644532-12.460937-3.988282-19.09375-3.988282-23.632812 0-43.289062 17.324219-46.957031 39.941406l-26.816406-5.214843c-4-.777344-6.90625-4.300781-6.90625-8.375v-27.382813h8.535156c4.140625 0 7.5-3.359375 7.5-7.5s-3.359375-7.5-7.5-7.5h-8.53125v-8.53125c0-4.707031 3.828125-8.53125 8.53125-8.53125h6.160156c7.574219 0 14.941406-1.515625 21.902344-4.496094l92.5625-39.671874c4.058594-1.738282 8.273438-2.890626 12.589844-3.476563l38.265625 44.640625c6 7.003906 14.730469 11.019531 23.953125 11.019531h181.324218c20.042969 0 55.804688 2.347657 82.300782 17.0625h-2.136719c-4.144531 0-7.5 3.359375-7.5 7.5 0 4.144531 3.355469 7.5 7.5 7.5h16.238281c.199219 1.03125.308594 2.085938.308594 3.15625v13.910157h-23.316406c-8.203125-14.351563-23.648438-24.046876-41.328125-24.046876-17.679688 0-33.125 9.695313-41.328125 24.046876h-14.78125c-4.144532 0-7.5 3.355468-7.5 7.5 0 4.140624 3.355468 7.5 7.5 7.5h9.308594c-.503907 2.769531-.78125 5.617187-.78125 8.53125 0 2.914062.277343 5.761718.78125 8.53125zm289.878907 24.046874c-17.964844 0-32.582031-14.613281-32.582031-32.578124 0-17.964844 14.617187-32.582032 32.582031-32.582032 17.964843 0 32.582031 14.617188 32.582031 32.582032 0 17.964843-14.617188 32.578124-32.582031 32.578124zm56.113281-24.046874h-9.3125c.503906-2.769532.78125-5.617188.78125-8.53125 0-2.914063-.277344-5.761719-.78125-8.53125h17.84375v8.53125c0 4.703124-3.828125 8.53125-8.53125 8.53125zm0 0"/><path d="m344.179688 120.742188h-100.460938l-16.988281-22.652344c-4.421875-5.894532-11.460938-9.414063-18.828125-9.414063h-32.0625c-2.84375 0-5.4375 1.605469-6.707032 4.148438-1.273437 2.539062-1 5.582031.707032 7.851562l19.238281 25.652344c4.417969 5.894531 11.457031 9.414063 18.824219 9.414063h136.277344c4.140624 0 7.5-3.359376 7.5-7.5 0-4.144532-3.359376-7.5-7.5-7.5zm-136.277344 0c-2.671875 0-5.222656-1.277344-6.824219-3.414063l-10.238281-13.652344h17.0625c2.671875 0 5.222656 1.277344 6.828125 3.414063l10.238281 13.652344zm0 0"/><path d="m95.675781 128.757812c-8.554687 0-15.515625 6.960938-15.515625 15.515626 0 8.554687 6.960938 15.515624 15.515625 15.515624 8.558594 0 15.515625-6.960937 15.515625-15.515624 0-8.554688-6.957031-15.515626-15.515625-15.515626zm0 0"/><path d="m432.355469 128.757812c-8.554688 0-15.515625 6.960938-15.515625 15.515626 0 8.554687 6.960937 15.515624 15.515625 15.515624 8.554687 0 15.515625-6.960937 15.515625-15.515624 0-8.554688-6.960938-15.515626-15.515625-15.515626zm0 0"/></g></svg>\n            `,this.finish=document.createElement("img"),this.finish.src="racing-flag.svg",this.finish.classList.add("finish"),this.carHeader.appendChild(this.btnSelect),this.carHeader.appendChild(this.btnRemove),this.carHeader.appendChild(this.carTitle),this.carContainer.appendChild(this.carHeader),this.driveBtns.appendChild(this.btnStart),this.driveBtns.appendChild(this.btnStop),this.carMain.appendChild(this.driveBtns),this.carTrack.appendChild(this.car),this.carTrack.appendChild(this.finish),this.carMain.appendChild(this.carTrack),this.carContainer.appendChild(this.carMain),this.btnSelect.addEventListener("click",(()=>{this.store.setSelectedCar(this.name,this.color,this.carId),this.btnSelect.dispatchEvent(new Event("updateSelect",{bubbles:!0}))})),this.btnRemove.addEventListener("click",(()=>{r.deleteCar(this.carId),this.btnSelect.dispatchEvent(new Event("removed",{bubbles:!0})),setTimeout((()=>{r.deleteWinner(this.carId),this.btnSelect.dispatchEvent(new Event("newWinners",{bubbles:!0}))}),100)}));const i=()=>{this.startCar()},s=()=>{this.stopCar()};this.btnStart.addEventListener("click",i),this.btnStop.addEventListener("click",s),document.addEventListener("race",i),document.addEventListener("reset",s),this.removeListeners=()=>{document.removeEventListener("race",i),document.removeEventListener("reset",s)}}startCar(){this.btnStart.classList.add("btn_disabled"),(()=>{i(this,void 0,void 0,(function*(){const{velocity:e,distance:t}=yield r.startEngine(this.carId);this.btnStop.classList.remove("btn_disabled"),this.animateCar(t/e),yield r.driveEngine(this.carId).then((n=>i(this,void 0,void 0,(function*(){if(!1===n.success&&cancelAnimationFrame(this.animationID),!0===n.success&&!0===this.store.getIsRace()){const n=(yield r.getWinner(this.carId)).id;if(n){this.wins=(yield r.getWinner(this.carId)).wins,this.wins+=1;const n=+(t/e/this.MILLISECONDS).toFixed(2),i=(yield r.getWinner(this.carId)).time;r.updateWinner(this.carId,{wins:this.wins,time:n<i?+(t/e/this.MILLISECONDS).toFixed(2):i})}n||(this.wins=1,r.createWinner({id:this.carId,wins:this.wins,time:+(t/e/this.MILLISECONDS).toFixed(2)}));const i=document.createElement("div");i.classList.add("win-message"),i.innerText=`${this.name} won with time ${(t/e/this.MILLISECONDS).toFixed(2)} seconds`,document.body.appendChild(i),setTimeout((()=>{i.remove()}),this.TIME_TO_SHOW_WIN_MESSAGE),document.dispatchEvent(new Event("newWinners",{bubbles:!0})),this.store.setIsRace(!1)}}))))}))})()}stopCar(){this.btnStop.classList.add("btn_disabled"),(()=>{i(this,void 0,void 0,(function*(){yield r.stopEngine(this.carId),this.btnStart.classList.remove("btn_disabled"),this.btnStop.classList.add("btn_disabled"),cancelAnimationFrame(this.animationID),this.car.style.left="0"}))})()}animateCar(e){let t=0;const n=()=>{t+=1/e*this.MILLISECONDS,this.car.style.left=`${t}%`,t<100&&(this.animationID=requestAnimationFrame(n))};n()}render(){return this.carContainer}destroy(){this.removeListeners()}}},509:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),a=s(n(71));t.default=class{constructor(){this.page=document.createElement("h3"),this.page.classList.add("page"),this.carsContainer=document.createElement("div"),this.carsContainer.classList.add("cars"),this.carsArray=[]}renderPageNumber(e){return this.page.innerText=`Page #${e}`,this.page}render(e){const t=document.createDocumentFragment();return t.appendChild(this.renderPageNumber(e)),(()=>{i(this,void 0,void 0,(function*(){const{cars:t}=yield r.getCars(e);t.forEach((e=>{const t=new a.default(e.name,e.color,e.id);this.carsArray.push(t),this.carsContainer.appendChild(t.render())}))}))})(),t.appendChild(this.carsContainer),t}clear(){this.carsArray.forEach((e=>{e.destroy()})),this.carsArray=[],this.carsContainer.innerHTML=""}}},599:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),a=s(n(419)),d=s(n(576));t.default=class{constructor(){this.controls=document.createElement("div"),this.controls.classList.add("controls"),this.formCreate=document.createElement("form"),this.formCreate.classList.add("create-car"),this.formUpdate=document.createElement("form"),this.formUpdate.classList.add("update-car"),this.actionBtns=document.createElement("div"),this.actionBtns.classList.add("action-btns"),this.title=document.createElement("h2"),this.title.classList.add("title"),this.store=a.default.getInstance(),this.generateCars=new d.default}createForm(e){this.formCreate.innerHTML='\n        <input type="text" name="name" id="name-create" minlength="1" maxlength="35">\n        <input type="color" name="color" id="color-create">\n        <div class="btn btn-create">Create</div>\n    ',this.formUpdate.innerHTML='\n        <input type="text" name="name" id="name-update" minlength="1" maxlength="35">\n        <input type="color" name="color" id="color-update">\n        <div class="btn btn-update">Update</div>\n    ';const t=this.formCreate.querySelector("input[type=text]"),n=this.formCreate.querySelector("input[type=color]"),i=this.formUpdate.querySelector("input[type=text]"),s=this.formUpdate.querySelector("input[type=color]"),a=this.formCreate.querySelector(".btn-create"),d=this.formUpdate.querySelector(".btn-update");let c;null==d||d.classList.add("btn_disabled");let o,l="#000000",h="#000000";return"update"===e&&document.addEventListener("updateSelect",(()=>{i&&s&&(i.value=this.store.getSelectedCar().name,s.value=this.store.getSelectedCar().color,o=i.value,h=s.value,null==d||d.classList.remove("btn_disabled"))})),null==t||t.addEventListener("change",(()=>{c=t.value})),null==n||n.addEventListener("change",(()=>{l=n.value})),null==i||i.addEventListener("change",(()=>{o=i.value})),null==s||s.addEventListener("change",(()=>{h=s.value})),null==a||a.addEventListener("click",(e=>{var i;c&&l&&(r.createCar({name:c,color:l}),t&&n&&(t.value="",n.value="#000000",c="",l="#000000"),this.getCarsCount(),null===(i=e.target)||void 0===i||i.dispatchEvent(new Event("created",{bubbles:!0})))})),null==d||d.addEventListener("click",(e=>{var t,n;const a=null===(t=this.store.getSelectedCar())||void 0===t?void 0:t.id;a&&r.updateCar(a,{name:o,color:h}),i&&s&&(i.value="",s.value="#000000",o=i.value,h=s.value,null==d||d.classList.add("btn_disabled")),null===(n=e.target)||void 0===n||n.dispatchEvent(new Event("updated",{bubbles:!0}))})),"create"===e?this.formCreate:this.formUpdate}createActionBtns(){this.actionBtns.innerHTML='\n      <div class="btn btn-race">Race!</div>\n      <div class="btn btn-reset">Reset</div>\n      <div class="btn btn-generate">Generate cars</div>\n    ';const e=this.actionBtns.querySelector(".btn-race");null==e||e.addEventListener("click",(()=>{document.dispatchEvent(new Event("race",{bubbles:!0})),null==e||e.classList.add("btn_disabled"),this.store.setIsRace(!0)}));const t=this.actionBtns.querySelector(".btn-reset");null==t||t.addEventListener("click",(()=>{document.dispatchEvent(new Event("reset",{bubbles:!0})),null==e||e.classList.remove("btn_disabled")}));const n=this.actionBtns.querySelector(".btn-generate");return null==n||n.addEventListener("click",(e=>{var t;this.generateCars.generateCars(),null===(t=e.target)||void 0===t||t.dispatchEvent(new Event("generated",{bubbles:!0})),this.getCarsCount()})),this.actionBtns}getCarsCount(){(()=>{i(this,void 0,void 0,(function*(){const{carsCount:e}=yield r.getCars();this.title.innerText=`Garage (${e})`}))})()}render(){return this.controls.insertAdjacentElement("beforeend",this.createForm("create")),this.controls.insertAdjacentElement("beforeend",this.createForm("update")),this.controls.insertAdjacentElement("beforeend",this.createActionBtns()),this.getCarsCount(),this.controls.appendChild(this.title),document.addEventListener("removed",(()=>{this.getCarsCount()})),this.controls}}},156:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),a=s(n(419)),d=s(n(509)),c=s(n(599));t.default=class{constructor(){this.store=a.default.getInstance(),this.garage=document.createElement("div"),this.garage.classList.add("garage"),this.controls=new c.default,this.controlsElement=this.controls.render(),this.pageControls=document.createElement("div"),this.pageControls.classList.add("page-controls"),this.cars=new d.default}render(){this.garage.innerHTML="",this.cars.clear();const e=this.cars.render(this.store.getPageNumber());return this.garage.appendChild(this.controlsElement),this.garage.appendChild(e),this.garage.appendChild(this.renderPageNavBtns()),this.garage}renderPageNavBtns(){this.pageControls.innerHTML="";const e=document.createElement("div");e.classList.add("btn"),e.innerText="Next >>";const t=document.createElement("div");return t.classList.add("btn"),t.innerText="<< Previous",t.addEventListener("click",(()=>{this.store.getPageNumber()>1&&(this.store.decPageNumber(),this.render())})),1===this.store.getPageNumber()&&t.classList.add("btn_disabled"),e.addEventListener("click",(()=>{this.store.incPageNumber(),this.render()})),(()=>{i(this,void 0,void 0,(function*(){const{cars:t}=yield r.getCars(this.store.getPageNumber()+1);0===t.length&&e.classList.add("btn_disabled")}))})(),this.pageControls.appendChild(t),this.pageControls.appendChild(e),this.pageControls}addVisibility(){this.garage.classList.remove("invisible")}removeVisibility(){this.garage.classList.add("invisible")}}},576:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(107);t.default=class{constructor(){this.models=["Audi","BMW","Volkswagen","Ford","Porsche","Ferrari","Lamborghini","Lada","Honda","Fiat","Suzuki","Seat","Tesla"],this.series=["A","B","C","E","S","RX","RS","M","i","X"],this.seriesNumbers=["1","2","3","4","5","6","7","8","9","666"],this.HOW_MUCH_GENERATE=100,this.MAX_NUMBER_OF_HEX_COLOR=16777215}generateCars(){function e(e){return Math.floor(Math.random()*e)}for(let t=1;t<=this.HOW_MUCH_GENERATE;t+=1){const t={name:`${this.models[e(this.models.length)]} ${this.series[e(this.series.length)]}${this.seriesNumbers[e(this.seriesNumbers.length)]}`,color:`#${Math.floor(Math.random()*this.MAX_NUMBER_OF_HEX_COLOR).toString(16)}`};i.createCar(t)}}}},608:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(156)),a=s(n(499));t.default=class{constructor(){this.main=document.createElement("div"),this.main.classList.add("main"),this.garage=new r.default,this.winners=new a.default}render(){this.main.appendChild(this.garage.render()),(()=>{i(this,void 0,void 0,(function*(){this.main.appendChild(yield this.winners.render()),this.winners.addBtnListeners()}))})();const e=()=>{this.garage.render()};return this.main.addEventListener("removed",e),this.main.addEventListener("updated",e),this.main.addEventListener("created",e),this.main.addEventListener("generated",e),document.addEventListener("newWinners",(()=>{this.winners.render()})),this.main}reRenderWinners(){this.winners.render()}addGarageVisibility(){this.garage.addVisibility(),this.winners.removeVisibility()}addWinnersVisibility(){this.garage.removeVisibility(),this.winners.addVisibility()}}},499:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function d(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),a=s(n(419));t.default=class{constructor(){this.limit=10,this.store=a.default.getInstance(),this.pageControls=document.createElement("div"),this.pageControls.classList.add("page-controls"),this.btnPagePrev=document.createElement("div"),this.btnPagePrev.classList.add("btn"),this.btnPagePrev.classList.add("btnPagePrev"),this.btnPagePrev.innerText="<< Previous",this.btnPageNext=document.createElement("div"),this.btnPageNext.classList.add("btn"),this.btnPageNext.classList.add("btnPageNext"),this.btnPageNext.innerText="Next >>",this.winnersContainer=document.createElement("div"),this.winnersContainer.classList.add("winners"),this.winnersContainer.classList.add("invisible")}render(){return(()=>i(this,void 0,void 0,(function*(){var e,t;const n=this.store.getWinnersPageNumber(),s=this.store.getWinnersSort(),a=this.store.getWinnersOrder();this.btnPagePrev.classList.remove("btn_disabled"),this.btnPageNext.classList.remove("btn_disabled"),1===n&&this.btnPagePrev.classList.add("btn_disabled"),(()=>{i(this,void 0,void 0,(function*(){const{winners:e}=yield r.getWinners(this.store.getWinnersPageNumber()+1,this.limit,this.store.getWinnersSort(),a);0===e.length&&this.btnPageNext.classList.add("btn_disabled")}))})();let d=(n-1)*this.limit+1;const{winners:c,winnersCount:o}=yield r.getWinners(n,this.limit,s,a),l=document.createElement("div");l.classList.add("score-main");for(const e of c)l.insertAdjacentHTML("beforeend",`\n        <div class="score-result">\n          <div class="score-item">${d}</div>\n          <div class="score-item"><svg height="50px" viewBox="-5 5 520 220" width="100px" xmlns="http://www.w3.org/2000/svg">\n          <g style="fill:${(yield r.getCar(e.id)).color}; stroke:black; stroke-width:5px">\n          <path d="m498.542969 80.964844c-28.695313-20.128906-69.269531-24.351563-98.253907-24.351563h-6.351562l-101.007812-47.136719c-12.582032-5.875-26.574219-8.976562-40.457032-8.976562h-89.164062c-8.664063 0-17.09375 1.730469-25.058594 5.140625l-92.566406 39.671875c-5.082032 2.179688-10.460938 3.285156-15.992188 3.285156h-6.160156c-12.972656-.003906-23.53125 10.554688-23.53125 23.53125v50.914063c0 11.238281 8.007812 20.953125 19.039062 23.097656l29.679688 5.773437c3.667969 22.617188 23.324219 39.941407 46.957031 39.941407 17.679688 0 33.125-9.699219 41.328125-24.050781h254.023438c8.203125 14.351562 23.648437 24.050781 41.328125 24.050781 17.675781 0 33.125-9.699219 41.328125-24.050781h14.785156c12.972656 0 23.53125-10.554688 23.53125-23.53125v-37.441407c0-10.285156-5.03125-19.957031-13.457031-25.867187zm-211.957031-57.894532 71.882812 33.542969h-107.035156l-35.242188-41.113281h36.277344c11.710938 0 23.507812 2.617188 34.117188 7.570312zm-90.148438-7.570312 35.242188 41.113281h-12.714844c-4.835938 0-9.417969-2.105469-12.566406-5.78125l-30.285157-35.332031zm-53.960938 137.304688c.503907-2.769532.78125-5.617188.78125-8.53125 0-3.195313-.320312-6.394532-.953124-9.507813-.824219-4.058594-4.78125-6.679687-8.839844-5.859375-4.0625.824219-6.683594 4.785156-5.859375 8.84375.433593 2.128906.652343 4.324219.652343 6.523438 0 17.964843-14.617187 32.578124-32.582031 32.578124-17.964843 0-32.578125-14.613281-32.578125-32.578124 0-17.964844 14.613282-32.582032 32.578125-32.582032 4.550781 0 8.945313.917969 13.070313 2.726563 3.789062 1.660156 8.214844-.066407 9.878906-3.859375 1.664062-3.792969-.0625-8.214844-3.855469-9.878906-6.035156-2.644532-12.460937-3.988282-19.09375-3.988282-23.632812 0-43.289062 17.324219-46.957031 39.941406l-26.816406-5.214843c-4-.777344-6.90625-4.300781-6.90625-8.375v-27.382813h8.535156c4.140625 0 7.5-3.359375 7.5-7.5s-3.359375-7.5-7.5-7.5h-8.53125v-8.53125c0-4.707031 3.828125-8.53125 8.53125-8.53125h6.160156c7.574219 0 14.941406-1.515625 21.902344-4.496094l92.5625-39.671874c4.058594-1.738282 8.273438-2.890626 12.589844-3.476563l38.265625 44.640625c6 7.003906 14.730469 11.019531 23.953125 11.019531h181.324218c20.042969 0 55.804688 2.347657 82.300782 17.0625h-2.136719c-4.144531 0-7.5 3.359375-7.5 7.5 0 4.144531 3.355469 7.5 7.5 7.5h16.238281c.199219 1.03125.308594 2.085938.308594 3.15625v13.910157h-23.316406c-8.203125-14.351563-23.648438-24.046876-41.328125-24.046876-17.679688 0-33.125 9.695313-41.328125 24.046876h-14.78125c-4.144532 0-7.5 3.355468-7.5 7.5 0 4.140624 3.355468 7.5 7.5 7.5h9.308594c-.503907 2.769531-.78125 5.617187-.78125 8.53125 0 2.914062.277343 5.761718.78125 8.53125zm289.878907 24.046874c-17.964844 0-32.582031-14.613281-32.582031-32.578124 0-17.964844 14.617187-32.582032 32.582031-32.582032 17.964843 0 32.582031 14.617188 32.582031 32.582032 0 17.964843-14.617188 32.578124-32.582031 32.578124zm56.113281-24.046874h-9.3125c.503906-2.769532.78125-5.617188.78125-8.53125 0-2.914063-.277344-5.761719-.78125-8.53125h17.84375v8.53125c0 4.703124-3.828125 8.53125-8.53125 8.53125zm0 0"/><path d="m344.179688 120.742188h-100.460938l-16.988281-22.652344c-4.421875-5.894532-11.460938-9.414063-18.828125-9.414063h-32.0625c-2.84375 0-5.4375 1.605469-6.707032 4.148438-1.273437 2.539062-1 5.582031.707032 7.851562l19.238281 25.652344c4.417969 5.894531 11.457031 9.414063 18.824219 9.414063h136.277344c4.140624 0 7.5-3.359376 7.5-7.5 0-4.144532-3.359376-7.5-7.5-7.5zm-136.277344 0c-2.671875 0-5.222656-1.277344-6.824219-3.414063l-10.238281-13.652344h17.0625c2.671875 0 5.222656 1.277344 6.828125 3.414063l10.238281 13.652344zm0 0"/><path d="m95.675781 128.757812c-8.554687 0-15.515625 6.960938-15.515625 15.515626 0 8.554687 6.960938 15.515624 15.515625 15.515624 8.558594 0 15.515625-6.960937 15.515625-15.515624 0-8.554688-6.957031-15.515626-15.515625-15.515626zm0 0"/><path d="m432.355469 128.757812c-8.554688 0-15.515625 6.960938-15.515625 15.515626 0 8.554687 6.960937 15.515624 15.515625 15.515624 8.554687 0 15.515625-6.960937 15.515625-15.515624 0-8.554688-6.960938-15.515626-15.515625-15.515626zm0 0"/></g></svg></div>\n          <div class="score-item">${(yield r.getCar(e.id)).name}</div>\n          <div class="score-item">${e.wins}</div>\n          <div class="score-item">${e.time}</div>\n        </div>\n        `),d+=1;let h="Wins",u="Best time (seconds)";return"wins"===s&&"ASC"===a&&(h="Wins &#8595;"),"wins"===s&&"DESC"===a&&(h="Wins &#8593;"),"time"===s&&"ASC"===a&&(u="Best time (seconds) &#8595;"),"time"===s&&"DESC"===a&&(u="Best time (seconds) &#8593;"),this.winnersContainer.innerHTML=`\n        <h2 class="title">Winners (${o})</h2>\n        <h3 class="page">Page #${this.store.getWinnersPageNumber()}</h3>\n        <div class="score-container">\n          <div class="score-header">\n            <div class="score-title">Number</div>\n            <div class="score-title">Car</div>\n            <div class="score-title">Name</div>\n            <div class="score-title sort-wins">${h}</div>\n            <div class="score-title sort-time">${u}</div>\n          </div>\n          <div class="score-main">\n          ${l.innerHTML}\n          </div>\n        </div>\n      `,null===(e=this.winnersContainer.querySelector(".sort-wins"))||void 0===e||e.addEventListener("click",(e=>{var t;this.store.setWinnersSort("wins"),"ASC"===a?this.store.setWinnersOrder("DESC"):this.store.setWinnersOrder("ASC"),null===(t=e.target)||void 0===t||t.dispatchEvent(new Event("newWinners",{bubbles:!0}))})),null===(t=this.winnersContainer.querySelector(".sort-time"))||void 0===t||t.addEventListener("click",(e=>{var t;this.store.setWinnersSort("time"),"ASC"===a?this.store.setWinnersOrder("DESC"):this.store.setWinnersOrder("ASC"),null===(t=e.target)||void 0===t||t.dispatchEvent(new Event("newWinners",{bubbles:!0}))})),this.pageControls.appendChild(this.btnPagePrev),this.pageControls.appendChild(this.btnPageNext),this.winnersContainer.appendChild(this.pageControls),this.winnersContainer})))()}addBtnListeners(){this.btnPagePrev.addEventListener("click",(()=>{this.store.getWinnersPageNumber()>1&&(this.store.decWinnersPageNumber(),this.btnPagePrev.dispatchEvent(new Event("newWinners",{bubbles:!0})))})),this.btnPageNext.addEventListener("click",(()=>{this.store.incWinnersPageNumber(),this.btnPageNext.dispatchEvent(new Event("newWinners",{bubbles:!0}))})),window.addEventListener("hashchange",(()=>{this.render()}))}addVisibility(){this.winnersContainer.classList.remove("invisible"),this.render()}removeVisibility(){this.winnersContainer.classList.add("invisible"),this.render()}}},419:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.pageNumber=1,this.winnersPageNumber=1,this.selectedCar={name:"Tesla",color:"#000000",id:1},this.isRace=!1,this.winnersSort="time",this.winnersOrder="ASC"}static getInstance(){return n.instance||(n.instance=new n),n.instance}getPageNumber(){return this.pageNumber}incPageNumber(){this.pageNumber+=1}decPageNumber(){this.pageNumber-=1}getSelectedCar(){return this.selectedCar}setSelectedCar(e,t,n){this.selectedCar={name:e,color:t,id:n}}getIsRace(){return this.isRace}setIsRace(e){this.isRace=e}getWinnersPageNumber(){return this.winnersPageNumber}incWinnersPageNumber(){this.winnersPageNumber+=1}decWinnersPageNumber(){this.winnersPageNumber-=1}getWinnersSort(){return this.winnersSort}setWinnersSort(e){this.winnersSort=e}getWinnersOrder(){return this.winnersOrder}setWinnersOrder(e){this.winnersOrder=e}}t.default=n},607:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(962));n(373);const r=new s.default;r.render();let a=window.location.hash.slice(1);"winners"===a?r.addWinnersVisibility():"garage"!==a&&""!==a||r.addGarageVisibility(),window.addEventListener("hashchange",(()=>{a=window.location.hash.slice(1),"winners"===a?r.addWinnersVisibility():"garage"!==a&&""!==a||r.addGarageVisibility()}))}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();